{% comment %}
  Product Card Premium
  Requires: `product` object
{% endcomment %}

<div class="product-card">
  <a href="{{ product.url }}" class="product-card-link">
    <!-- Image Wrapper -->
    <div class="product-image-wrapper">
      {% if product.featured_image != blank %}
        <img src="{{ product.featured_image | image_url: width: 600 }}" 
             alt="{{ product.title | escape }}" 
             loading="lazy" 
             width="600" 
             height="600" 
             class="product-img">
             
        <!-- Hover Image (if second image exists) -->
        {% if product.images.size > 1 %}
          <img src="{{ product.images[1] | image_url: width: 600 }}" 
               alt="{{ product.title | escape }}" 
               loading="lazy" 
               width="600" 
               height="600" 
               class="product-img-hover">
        {% endif %}
      {% else %}
        <div class="product-placeholder"></div>
      {% endif %}

      <!-- Badge (Eg. Novidade, Clube) -->
      {% if product.tags contains 'Clube' %}
        <span class="product-badge badge-prime text-accent">Exclusivo Clube</span>
      {% endif %}
    </div>

    <!-- Info Wrapper -->
    <div class="product-info flex flex-col items-center">
      <h3 class="product-title font-heading text-dark">{{ product.title }}</h3>
      
      <div class="product-pricing">
        {% if product.compare_at_price > product.price %}
          <span class="price-compare text-secondary"><s>{{ product.compare_at_price | money }}</s></span>
        {% endif %}
        <span class="price-current text-primary">{{ product.price | money }}</span>
      </div>
    </div>
  </a>

  <!-- CTA Box: Quick Add to Cart -->
  <!-- Preparado para receber a lÃ³gica de Grama/Unidade na Sprint 3 -->
  <div class="product-actions">
    {% assign form_id = 'quick-add-form-' | append: product.id %}
    {% form 'product', product, id: form_id, class: 'quick-add-form' %}
      <input type="hidden" name="id" value="{{ product.variants.first.id }}">
      <button type="submit" class="btn-quick-add text-dark">
        Adicionar
      </button>
    {% endform %}
  </div>
</div>
